# matrix

## Работа с проектом
Для корректной работы с проектом рекомендуется использовать ОС `Linux` и связку `pyenv` и `poetry`, также Python версии 3.8.5 .    
Перед запуском проекта необходимо выполнить следующие действия:
```
pyenv install 3.8.5
pyenv local 3.8.5
poetry install 
``` 

Для запуска скрипта генерации матрицы, нужно перейти в директорию `/src` и выполнить следующую команду:
```
poetry run python matrix_create.py
```
Для запуска скрипта траспонирования матрицы, в той же директории `src` нужно выполнить:
```
poetry run python matrix_transp.py
```

Запуск скрипта генерации создает файл расширения `.csv` в той же директории, откуда скрипт запускается. такая же аналогия и для скрипта транспонирования, только он уже должен иметь в директории `/src` файл с исходной мтарицей.


## Навигация по коду

#### скрипт генерации 
Матрица генерируется случайными значениями от 0 до 9, как сказано в ТЗ. Рамзмер матрицы задается переменной `size`. Так как размер матрицы может быть 1 000 000 x 1 000 000 и более, то в процессе генерации матрицы, хранить уже сгенерированные элемениы матрицы в оперативной нецелесообразно, потому что размер ОЗУ ограничен. Было принято решение заполнения матрицы по частям, за это отвечает переменная `step`, она указывает сколько строк должно быть уже сегнерировано, чтобы можно было записать в файл. После записи переменная, которая отвечает за элементы матрицы (`matrix`) обновляется, и так до тех пор, пока не сгенерируется матрица. Данные в файл записывается с помощью `pandas`.

#### скрипт транспонирования
Транспонируется матрица следующим образом: считывается первая колонка `.csv` файла с уже сгененированной матрицей, для того, чтобы определить размер матрицы (так как по ТЗ можно считать её всегда квадратной); далее опираясь на то, что мы опять же не можем держать большой объем данных в оперативной памяти разбиваем матрицу на части (разбиение будет присходить по колонкам, для этого мы и определяли размер матрицы), за это отвечает переменная `step`, она указывает сколько колонок будет в одной части, далее колонки ситываются, преобразуется в строки (процесс транспонирования) и записываются в новый файл .

##### размер матрицы 1 000 000 x 1 000 000 :  
```
Время генерации одной строки = 0.9 сек   
Время записи 100 строк в файл = 5 минут   
```

##### размер матрицы 10 000 x 10 000:   
```
Время генерации матрицы = 4 минуты  
Время транспонирования матрицы = 4 минуты 47 секунд   
```

### Полезные ссылки 
[poetry](https://github.com/python-poetry/poetry)  
[pyenv](https://github.com/pyenv/pyenv)